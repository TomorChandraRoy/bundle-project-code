(()=>{"use strict";var e={5795:e=>{e.exports=window.ReactDOM},8744:(e,t,a)=>{var l=a(5795);t.H=l.createRoot,l.hydrateRoot}},t={};function a(l){var s=t[l];if(void 0!==s)return s.exports;var r=t[l]={exports:{}};return e[l](r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const l=window.React,s=window.wp.data,r=window.wp.domReady;var n=a.n(r),o=a(8744);const c=window.wp.i18n,m=window.wp.components,i=({main:e,mainLoading:t,setTemplates:a,type:s,category:r,setCategory:n,setPageNumber:o,search:c,setSearch:i})=>{const d=(0,l.useMemo)((()=>(()=>{let e;return(...t)=>{clearTimeout(e),e=setTimeout((()=>{(e=>{i(e),o(1),a([])})(...t)}),600)}})()),[c]),p=e=>{const t=e.target.value;d(t)},{"patterns-category":u=[],"pages-category":g=[]}=e||{},b="pages"===s?g:u,w=[{label:"All",name:"all"},...b?.filter((e=>"pro"!==e.name))];return(0,l.createElement)("aside",{className:"modalBodySidebar"},(0,l.createElement)("div",{className:"modalBodySidebarSearch"},(0,l.createElement)("input",{type:"text",placeholder:"Search",onChange:p}),(0,l.createElement)("svg",{onClick:p,xmlns:"http://www.w3.org/2000/svg",height:"16",width:"16",viewBox:"0 0 512 512"},(0,l.createElement)("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"}))),(0,l.createElement)("li",{className:"modalBodySidebarCategories"},t?(0,l.createElement)("div",{className:"bPlPlaceCenter"},(0,l.createElement)(m.Spinner,{className:"bPlSpinner"})):w.map((({name:e,label:t},s)=>(0,l.createElement)("li",{onClick:()=>{n(e),o(1),a([])},className:"libraryBtn "+(e===r?"active":""),key:s,dangerouslySetInnerHTML:{__html:t}})))))},d=window.wp.blockEditor,p=window.wp.blocks,u=(0,l.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"16",width:"12",viewBox:"0 0 384 512"},(0,l.createElement)("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})),g=(0,l.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"11",width:"11",viewBox:"0 0 512 512",fill:"currentColor"},(0,l.createElement)("path",{d:"M352 0c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9L370.7 96 201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L416 141.3l41.4 41.4c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V32c0-17.7-14.3-32-32-32H352zM80 32C35.8 32 0 67.8 0 112V432c0 44.2 35.8 80 80 80H400c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32V432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16H192c17.7 0 32-14.3 32-32s-14.3-32-32-32H80z"})),b=({nonce:e,isPremium:t,setShow:a,mainLoading:s,templates:r,templatesLoading:n,children:o})=>{const[c,i]=(0,l.useState)(!1);return(0,l.createElement)("div",{className:"modalBodyTemplates"},r?.length?(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"grid columns-3 columns-tablet-1 columns-mobile-1"},r.map(((s,r)=>{const{ID:n,original_content:o,category:u}=s,b=u.includes("pro"),w=t||!b,E=w?{onClick:()=>{i(n),wp.ajax.post("bblocks_template_import",{_wpnonce:e,original_content:o}).done((e=>{if(i(!1),e){const t=e.replaceAll('\\"','"').replaceAll("\\\\u003cbr\\\\u003e","<br/>").replaceAll("\\\\u003cstrong\\\\u003e","<strong>").replaceAll("\\\\u003c/strong\\\\u003e","</strong>").replaceAll("\\\\u003cem\\\\u003e","<em>").replaceAll("\\\\u003c/em\\\\u003e","</em>");try{const e=(0,p.parse)(t);wp.data.dispatch("core/block-editor").insertBlocks(e),a(!1)}catch(e){console.error(e)}}})).fail((e=>{console.error(e),i(!1)}))}}:{href:"https://bblockswp.com/#pricing",target:"_blank",rel:"noreferrer"};return(0,l.createElement)("div",{className:"modalBodyTemplateItem",key:r},(0,l.createElement)("div",{className:"modalBodyTemplateItemPreviewWrap"},(0,l.createElement)("div",{className:"modalBodyTemplateItemPreview"},(0,l.createElement)(d.BlockPreview,{blocks:(0,p.parse)(o),viewportWidth:1600})),(0,l.createElement)("div",{className:"modalBodyTemplateItemButton"},(0,l.createElement)("a",{className:c===n?"disabled":"",...E},w?(0,l.createElement)(l.Fragment,null,(0,l.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},(0,l.createElement)("path",{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"})),"Import"):(0,l.createElement)(l.Fragment,null,"Get Pro",g)),c===n&&(0,l.createElement)(m.Spinner,{className:"bPlSpinner"}))))}))),o):(0,l.createElement)(l.Fragment,null,s||n?(0,l.createElement)("div",{className:"bPlPlaceCenter"},(0,l.createElement)(m.Spinner,{className:"bPlSpinner"})):(0,l.createElement)("div",{className:"bPlPlaceCenter modalBodyTemplateNotFound"},"No Templates Found!!")))},w=e=>{const{isPremium:t,show:a,setShow:s,setTemplates:r,totalCount:n,templatesLoading:o,setType:d,setCategory:p,pageNumber:g,setPageNumber:w}=e,E=(0,l.useRef)();return(0,l.useEffect)((()=>{let e=e=>{E.current?.contains(e.target)||s(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}})),(0,l.createElement)("div",{className:"templateLibraryModalWrap",style:{visibility:a?"visible":"hidden"}},(0,l.createElement)("div",{ref:E,style:{marginTop:a?"0":"50px",transition:"margin 0.5s ease-out"},className:"modalContainer"},(0,l.createElement)("header",{className:"modalHeader"},(0,l.createElement)("div",{className:"modalHeaderLogo"},(0,l.createElement)("img",{src:"https://ps.w.org/b-blocks/assets/icon-128x128.png",alt:"B Blocks"})," B Blocks"),(0,l.createElement)("div",{className:"modalHeaderTypes"},(0,l.createElement)(m.TabPanel,{className:"bPlTabPanel bPlAutoTab",activeClass:"activeTab",tabs:[{name:"patterns",title:(0,c.__)("Patterns","b-blocks")}],onSelect:e=>{d(e),p("all"),w(1),r([])}},(()=>(0,l.createElement)(l.Fragment,null)))),(0,l.createElement)("div",{onClick:()=>s(!1),className:"modalHeaderClose"},u)),a&&(0,l.createElement)("div",{className:"modalBody"},(0,l.createElement)(i,{...e}),(0,l.createElement)(b,{...e,setShow:s,isPremium:t},(0,l.createElement)("div",{className:"modalBodyBottom"},o?(0,l.createElement)("div",{className:"bPlPlaceCenter"},(0,l.createElement)(m.Spinner,{className:"bPlSpinner"})):9*g<n&&(0,l.createElement)("button",{className:"modalBodyTemplateLoadMore libraryBtn active",onClick:()=>w((e=>e+1))},"Load More"))))))},E=(e,t={},a=!0)=>{const[s,r]=(0,l.useState)(!1),[n,o]=(0,l.useState)(!1),[c,m]=(0,l.useState)(null),[i,d]=(0,l.useState)(null);if(!wp.ajax)return void console.error("Please use wp-util as a dependency");const p=(a={})=>{r(!0),o(!1),m(null),wp.ajax.post(e,{...t,...a}).done((e=>{r(!1),d(e)})).fail((e=>{r(!1),o(!0),m(e)}))},u=(e={})=>{p(e)};return(0,l.useEffect)((()=>{a&&p(t)}),[]),{data:i,saveData:u,refetch:u,isLoading:s,isError:n,error:c}},h=e=>{const[t,a]=(0,l.useState)(!0),[s,r]=(0,l.useState)(!1),[n,o]=(0,l.useState)(null),[c,m]=(0,l.useState)(null);(0,l.useEffect)((()=>{r(!1),o(null),wp.api.loadPromise.then((()=>{(new wp.api.models.Settings).fetch().then((t=>{m(i(t[e])),a(!1)}))}))}),[]);const i=e=>{let t=e;try{t=JSON.parse(e)}catch(e){r(!0),o(e.message)}return t};return{data:c,isLoading:t,isError:s,error:n}},v=()=>{const{isPremium:e}=(()=>{const{data:e}=h("bBlocksUtils"),{data:t=null,refetch:a,isLoading:s=!0}=E("bBlocksPipeChecker",{_wpnonce:e?.nonce},!0),r=!s&&t?.isPipe||!1;return(0,l.useEffect)((()=>{a()}),[e]),{isPremium:r,isLoading:s}})(),[t,a]=(0,l.useState)(!1),[s,r]=(0,l.useState)("patterns"),[n,o]=(0,l.useState)("all"),[m,i]=(0,l.useState)(1),[d,p]=(0,l.useState)(""),[u,g]=(0,l.useState)([]),{data:b={}}=h("bBlocksUtils"),{main:v,isLoading:y}=(e=>{const{data:t=null,refetch:a,isLoading:s}=E("bblocks_templates_main",{_wpnonce:e},!1);(0,l.useEffect)((()=>{a()}),[e]);const[r,n]=(0,l.useState)([]);return(0,l.useEffect)((()=>{t&&n(t)}),[t]),{main:r,isLoading:s}})(b?.nonce),{templates:S,totalCount:f,refetchTemplates:N,isLoading:L}=((e,t="patterns",a="all",s=1,r="")=>{const n=r.split(" ").join(","),{data:o=null,saveData:c,refetch:m,isLoading:i}=E("bblocks_templates",{_wpnonce:e,type:t,category:a,pageNumber:s,search:n},!1);(0,l.useEffect)((()=>{m()}),[e]);const[d,p]=(0,l.useState)([]),[u,g]=(0,l.useState)([]);return(0,l.useEffect)((()=>{s&&c({type:t,category:a,pageNumber:s,search:n})}),[t,a,s,r]),(0,l.useEffect)((()=>{o&&(p(o?.patterns||[]),g(parseInt(o?.count)||0))}),[o]),{templates:d,totalCount:u,refetchTemplates:c,isLoading:i}})(b?.nonce,s,n,m,d);return(0,l.useEffect)((()=>{g([...u,...S])}),[S]),(0,l.createElement)(l.Fragment,null,(0,l.createElement)("button",{className:"templateLibraryButton",onClick:()=>a(!0)},(0,l.createElement)("img",{src:"https://ps.w.org/b-blocks/assets/icon-128x128.png",alt:"B Blocks"}),(0,c.__)("Template Library","b-blocks")),(0,l.createElement)(w,{nonce:b?.nonce,isPremium:e,show:t,setShow:a,main:v,mainLoading:y,templates:u,setTemplates:g,totalCount:f,refetchTemplates:N,templatesLoading:L,type:s,setType:r,category:n,setCategory:o,pageNumber:m,setPageNumber:i,search:d,setSearch:p}))};n()((()=>{const e=document.createElement("div");e.classList.add("bBlocksTemplateLibraryWrap"),(0,o.H)(e).render((0,l.createElement)(v,null)),(0,s.subscribe)((()=>{setTimeout((()=>{const t=document.querySelector(".edit-post-header-toolbar");t&&(t.querySelector(".bBlocksTemplateLibraryWrap")||t.appendChild(e))}),1)}))}))})();